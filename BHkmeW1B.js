import{g as X,c as Y,a as Z,u as ee,b as te}from"./DKysXW5L.js";import{d as V,r as se,l as c,o as E,m as d,a,c as n,e,F as g,G as S,f as i,q as y,H as ae,n as F,p as C,y as l,t as R,h as oe,i as ne,k as D,B as le,v as re,I as ie,D as ce,E as de}from"./assets/index-BxCCbtwY.js";import{f as ue,d as I,g as _e}from"./B-Aanp_k.js";import{u as pe}from"./BUg_RmFS.js";import{g as ge}from"./CVqE-y6e.js";import{_ as N}from"./DlAUqK2U.js";const he={class:"list flex flex-wrap w-[1200px] max-w-full gap-5 mb-5"},fe=["alt","src"],me={class:"p-2 flex-1"},ve={class:"text-2xl"},xe={class:"overflow-hidden flex flex-wrap gap-1 my-1"},ye={key:0,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},be={class:"flex justify-between items-center"},ke={class:"flex sm:flex-col"},we={class:"mr-4 text-gray-900 dark:text-gray-300"},Ce={class:"text-red-500"},Se={class:"image-price"},$e={class:"text-xl text-blue-600 dark:text-blue-400"},je=V({__name:"ListProducts",setup(h){const u=se({limit:"20",page:1,search_value:""}),f=c([]),m=c(0),{run:b}=pe(async()=>ge(ae(u)).then(r=>{f.value=r.list,m.value=r.total}),{debounceWait:500,manual:!0});return E(()=>{b()}),(r,p)=>{const v=d("router-link"),$=d("a-pagination");return a(),n(g,null,[e("div",he,[(a(!0),n(g,null,S(f.value,s=>(a(),F(v,{key:s.gd_no,to:"/detail?id="+s.gd_no,class:"translate-x-1 bg-white image-card flex relative pointer w-[590px] max-w-full rounded-xl border transition dark:border-gray-700 overflow-hidden dark:bg-gray-800 dark:shadow-gray-700 hover:text-blue-400 hover:shadow-xl"},{default:C(()=>[e("img",{alt:s.gd_name,src:s.picture,class:"w-[138px] h-[138px]",loading:"lazy"},null,8,fe),e("div",me,[e("h4",ve,l(s.gd_name),1),e("div",xe,[(a(!0),n(g,null,S(s.gd_keywords,k=>(a(),n("div",{key:s.gd_no+k,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},l(k),1))),128)),s.is_automatic?(a(),n("div",ye," 自动发货 ")):R("",!0)]),e("div",be,[e("p",ke,[e("span",we,"库存："+l(s.in_stock),1),e("span",Ce,"已售："+l(s.sales_volume),1)]),e("p",Se,[e("span",$e,l(y(ue)(s.retail_price)),1)])])])]),_:2},1032,["to"]))),128))]),i($,{current:u.page,"onUpdate:current":p[0]||(p[0]=s=>u.page=s),size:u.limit,"onUpdate:size":p[1]||(p[1]=s=>u.limit=s),total:m.value,"hide-on-single-page":"","show-less-items":"",onChange:y(b)},null,8,["current","size","total","onChange"])],64)}}}),Le=N(je,[["__scopeId","data-v-8372562c"]]),_=h=>(ce("data-v-2e186679"),h=h(),de(),h),Ie={class:"home flex flex-col items-center gap-5"},Re={key:0,class:"flex flex-wrap w-[1200px] max-w-full sm:flex-col-reverse gap-5"},Te={class:"p-5 flex justify-between items-center"},ze=_(()=>e("h4",null,"套餐",-1)),Ue=_(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),Be={key:0,class:"h-full overflow-auto scrollbar-width-none flex-1"},De={class:"hover:bg-gray-100 dark:hover:bg-gray-900 p-5"},Ve={class:"flex items-center justify-between"},Ee={class:"flex items-center justify-between"},Fe={key:1},Ne={class:"h-full flex items-center justify-center"},Pe={class:"copilot-box rounded-xl p-5"},qe={class:"flex justify-between mb-2"},Ge=_(()=>e("span",{class:"font-bold text-gray-50"},"Copilot",-1)),Me={class:"flex justify-between items-center text-gray-200"},Ae=_(()=>e("span",{class:""},"剩余时间",-1)),He={class:"text-2xl"},We={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},Je={class:"flex justify-between items-center mb-2"},Ke=_(()=>e("h4",{class:""},"我的钱包",-1)),Oe=_(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),Qe={class:"flex flex-col gap-2"},Xe={class:"text-gray-600 dark:text-gray-200"},Ye={class:"flex flex-col justify-between gap-2"},Ze={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},et=_(()=>e("span",null,"服务器时间：",-1)),tt={class:"text-blue-500"},st=V({__name:"index",setup(h){const u=c(),f=c({width:0,height:0}),m=oe(),b=ne(),r=c({paused_time:void 0,remaining_time:0,start_time:void 0,is_paused:1}),p=D(()=>I(r.value.remaining_time,"second"));function v(){r.value.is_paused!=1&&setTimeout(()=>{r.value.remaining_time-=1,v()},1e3)}function $(){X().then(t=>{r.value=t,v()})}const s=c(!1);function k(){s.value=!0,Y().then(t=>{r.value.remaining_time=t.remaining_time,r.value.is_paused=t.is_paused,v()}).finally(()=>{s.value=!1})}const T=c([]);function z(){Z().then(t=>{T.value=t}).finally(()=>{A()})}const x=c(""),j=c(!1);function P(){j.value=!0,ee(x.value).then(()=>{x.value="",z(),ie.success("兑换成功")}).finally(()=>{j.value=!1})}const L=c([]);function q(){te({status:"ACTIVE",order_by:"asc"}).then(t=>{L.value=t.list.map(G)})}function G(t){t.reason_label=t.reason||"已使用：0s";const w=t.reason_label.match(/\d+/);return t.reason=w[0],t.percent=100-+t.reason/t.recharge_time*100,t}const M=D(()=>_e(b.timeStamp));function A(){const t=getComputedStyle(u.value);f.value={width:parseFloat(t.width),height:parseFloat(t.height)}}return E(()=>{m.account_id&&($(),z(),q())}),(t,w)=>{const U=d("router-link"),B=d("a-divider"),H=d("a-progress"),W=d("a-empty"),J=d("a-switch"),K=d("a-input"),O=d("a-button");return a(),n("div",Ie,[y(m).account_id?(a(),n("div",Re,[e("div",{style:le({height:f.value.height+"px"}),class:"flex-1 sm:min-w-[300px] flex flex-col bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl overflow-hidden"},[e("div",Te,[ze,i(U,{to:"/copilot-package"},{default:C(()=>[Ue]),_:1})]),i(B,{class:"m-0"}),L.value.length?(a(),n("div",Be,[(a(!0),n(g,null,S(L.value,(o,Q)=>(a(),n(g,{key:o.source},[Q!=0?(a(),F(B,{key:0,class:"m-0"})):R("",!0),e("div",De,[e("div",Ve,[e("h4",null,l(o.source),1),e("span",null,"总时长："+l(o.recharge_time_label),1)]),i(H,{percent:o.percent,"show-info":!1,class:"mb-0",strokeColor:"#1677ff"},null,8,["percent"]),e("div",Ee,[e("span",null,"剩余："+l(y(I)(o.recharge_time-+(o.reason||"0"),"second")),1),e("span",null,"已使用："+l(y(I)(+(o.reason||"0"),"second")),1)])])],64))),128))])):(a(),n("div",Fe,[e("div",Ne,[i(W)])]))],4),e("div",{ref_key:"serverRef",ref:u,class:"w-[300px] sm:w-full flex flex-col gap-5 flex-shrink-0"},[e("div",Pe,[e("ul",null,[e("li",qe,[Ge,i(J,{checked:r.value.is_paused,"checked-value":0,loading:s.value,"un-checked-value":1,"checked-children":"开",class:"copilot-green","un-checked-children":"关",onClick:k},null,8,["checked","loading"])]),e("li",Me,[Ae,e("span",He,l(p.value),1)])])]),e("div",We,[e("div",Je,[Ke,i(U,{to:"/purse"},{default:C(()=>[Oe]),_:1})]),e("ul",Qe,[(a(!0),n(g,null,S(T.value,o=>(a(),n("li",{key:o.type_label,class:"flex justify-between"},[e("span",Xe,l(o.type_label),1),e("span",null,l(o.balance_label),1)]))),128)),e("li",Ye,[i(K,{value:x.value,"onUpdate:value":w[0]||(w[0]=o=>x.value=o),valueModifiers:{trim:!0},"allow-clear":"",placeholder:"兑换码"},null,8,["value"]),i(O,{loading:j.value,type:"primary",disabled:!x.value,onClick:P},{default:C(()=>[re("充值 ")]),_:1},8,["loading","disabled"])])])]),e("div",Ze,[et,e("span",tt,l(M.value),1)])],512)])):R("",!0),i(Le)])}}}),ct=N(st,[["__scopeId","data-v-2e186679"]]);export{ct as default};
