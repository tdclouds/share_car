import{u as D}from"./DNqgE8D9.js";import{d as F,k as n,r as w,w as H,o as Y,c as y,e as z,p as i,m,E,n as u,b as s,F as M,G as P,l as v,P as h}from"./assets/index-BZ3WimOh.js";import{e as T,a as N}from"./Cj0c8QLb.js";const O={class:"w-[1200px] m-auto"},R={class:"flex items-start justify-between mb-4"},W=F({__name:"index",setup(V){const x=[{title:"数量",dataIndex:"num"},{title:"余额",dataIndex:"balance"},{title:"备注信息",dataIndex:"content"},{title:"过期时间",dataIndex:"expire_time"},{title:"使用状态",dataIndex:"is_use_label"},{title:"创建时间",dataIndex:"created_at"}],r=n(0),t=w({page:1,limit:10}),k=n(!1),c=n(!1),f=n([]),p=n([]),o=w({current:t.page,pageSize:t.limit,hideOnSinglePage:!0,pageSizeOptions:["10","15","20"],showTotal(e){return`共 ${e} 条`},showSizeChanger:!0,onChange(e,l){c.value=!0,t.page=e,t.limit=l,o.current=e,o.pageSize=l},total:0}),{run:_}=D(async()=>T(r.value,E(t)).then(e=>{f.value=e.list,o.total=e.total,p.value=e.filter,C(),c.value=!1}),{debounceWait:1e3,manual:!0});function C(){p.value.forEach(e=>{e.options&&(L.value[e.name]=e.options.filter(l=>l.value!==0))})}const b=n([]);async function I(){await N().then(e=>{b.value=e,r.value=e[0].type})}H(t,()=>{c.value===!1&&(t.page=1,o.current=1),_()});const L=n({});return Y(async()=>{await I(),_()}),(e,l)=>{const S=u("a-select"),g=u("a-form-item"),U=u("a-form"),B=u("a-table");return s(),y("div",O,[z("div",R,[i(U,{class:"filter",layout:"inline"},{default:m(()=>[i(g,{label:"钱包"},{default:m(()=>[i(S,{value:r.value,"onUpdate:value":l[0]||(l[0]=a=>r.value=a),"field-names":{label:"type_label",key:"type"},options:b.value,class:"w-[180px!important] mr-2 mb-2"},null,8,["value","options"])]),_:1}),(s(!0),y(M,null,P(p.value,a=>(s(),v(g,{key:a.name,label:a.label},{default:m(()=>[a.type==="datetime"?(s(),v(h("a-date-picker"),{key:0,value:t[a.name],"onUpdate:value":d=>t[a.name]=d,placeholder:a.label,"show-time":{format:"HH:mm"},"allow-clear":"",class:"w-[180px!important] mr-2 mb-2",valueFormat:"YYYY-MM-DD HH:mm:ss"},null,40,["value","onUpdate:value","placeholder"])):(s(),v(h("a-"+a.type),{key:1,value:t[a.name],"onUpdate:value":d=>t[a.name]=d,options:a.options,placeholder:a.label,"allow-clear":"",class:"w-[180px!important] mr-2 mb-2"},null,40,["value","onUpdate:value","options","placeholder"]))]),_:2},1032,["label"]))),128))]),_:1})]),i(B,{columns:x,dataSource:f.value,loading:k.value,pagination:o,"row-key":a=>a.id,bordered:"",class:"w-full mb-4"},null,8,["dataSource","loading","pagination","row-key"])])}}});export{W as default};
