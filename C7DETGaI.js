import{E as P,F as J,o as E,G as K,H as M,r as I,I as O,d as B,k as h,J as Q,n as p,b as l,c as i,e,K as x,L as C,l as L,m as w,x as u,t as T,p as f,q as m,f as X,A as Y,N as Z,v as ee,C as te,D as se}from"./assets/index-DEyjB_H_.js";import{g as oe,c as ae,a as ne,u as le,b as re}from"./CR9EyvJ1.js";import{d as z,_ as ce}from"./Cp_pmQrv.js";import{u as ie}from"./v1BhuTDO.js";import{g as ue}from"./Buwuodfy.js";function de(t,s){var d,c;if(!P)return;if(!t)return s;let o;return typeof t=="function"?o=t():J(t)?o=(c=(d=t.value)==null?void 0:d.$el)!=null?c:t.value:o=t,o}function _e(t=()=>{}){const s=()=>{M(()=>{t()})};return E(()=>{window.addEventListener("resize",s,!1)}),K(()=>{window.removeEventListener("resize",s)}),null}function pe(t){const s=I({width:0,height:0}),d=()=>{var c,o;const _=de(t);s.width=(c=_==null?void 0:_.clientWidth)!=null?c:0,s.height=(o=_==null?void 0:_.clientHeight)!=null?o:0};return _e(d),E(()=>{setTimeout(()=>{d()},120)}),{...O(s)}}const fe={class:"list flex flex-wrap w-[1200px] pt-5"},he=["alt","src"],ge={class:"p-2 flex-1"},ve={class:"text-2xl"},me={class:"overflow-hidden my-4"},xe={key:0,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},be={class:"flex justify-between items-center"},ye={class:""},ke={class:"mr-4"},we={class:"text-red-500"},Ce={class:"image-price"},Ee={class:"text-xl text-blue-600 dark:text-blue-400"},Se=B({__name:"ListProducts",setup(t){const s=I({limit:"20",page:1,search_value:""}),d=h([]),c=h(0),{run:o}=ie(async()=>ue(Q(s)).then(_=>{d.value=_.list,c.value=_.total}),{debounceWait:500,manual:!0});return E(()=>{o()}),(_,g)=>{const S=p("router-link"),y=p("a-pagination");return l(),i(x,null,[e("div",fe,[(l(!0),i(x,null,C(d.value,a=>(l(),L(S,{key:a.gd_no,to:"/detail?id="+a.gd_no,class:"image-card flex pointer w-full rounded-xl border dark:border-slate-500 overflow-hidden bg-gray-100 dark:bg-gray-800 dark:shadow-gray-700 hover:text-blue-400 hover:shadow-xl mb-6"},{default:w(()=>[e("img",{alt:a.gd_name,src:a.picture,class:"w-32 h-32",loading:"lazy"},null,8,he),e("div",ge,[e("h4",ve,u(a.gd_name),1),e("p",me,[(l(!0),i(x,null,C(a.gd_keywords,v=>(l(),i("span",{key:a.gd_no+v,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},u(v),1))),128)),a.is_automatic?(l(),i("span",xe,"自动发货")):T("",!0)]),e("div",be,[e("p",ye,[e("span",ke,"库存："+u(a.in_stock),1),e("span",we,"已售："+u(a.sales_volume),1)]),e("p",Ce,[e("span",Ee,u(a.actual_price_label),1)])])])]),_:2},1032,["to"]))),128))]),f(y,{current:s.page,"onUpdate:current":g[0]||(g[0]=a=>s.page=a),size:s.limit,"onUpdate:size":g[1]||(g[1]=a=>s.limit=a),total:c.value,"hide-on-single-page":"","show-less-items":"",onChange:m(o)},null,8,["current","size","total","onChange"])],64)}}}),b=t=>(te("data-v-657cc818"),t=t(),se(),t),$e={class:"home flex flex-col items-center gap-5"},ze={key:0,class:"flex w-[1200px] gap-5 pt-5"},Le={class:"p-5 flex justify-between items-center"},Re=b(()=>e("h4",null,"套餐",-1)),je=b(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),Ie={class:"hover:bg-gray-100 dark:hover:bg-gray-900 p-5"},Be={class:"flex items-center justify-between"},Te={class:"flex items-center justify-between"},Ue={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},De={class:"flex justify-between items-center mb-2"},Ne=b(()=>e("h4",{class:""},"我的钱包",-1)),Ve=b(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),He={class:"flex flex-col gap-2"},We={class:"text-gray-600"},qe={class:"flex flex-col justify-between gap-2"},Ae={class:"copilot-box rounded-xl p-5"},Fe={class:"flex justify-between mb-2"},Ge=b(()=>e("span",{class:"font-bold text-gray-50"},"Copilot",-1)),Pe={class:"flex justify-between items-center text-gray-200"},Je=b(()=>e("span",{class:""},"剩余时间",-1)),Ke=B({__name:"index",setup(t){const s=h(),d=pe(s),c=X(),o=h({paused_time:void 0,remaining_time:0,start_time:void 0,is_paused:1});function _(){oe().then(n=>{o.value=n})}const g=h(!1);function S(){g.value=!0,ae().then(n=>{o.value.is_paused=n.is_paused}).finally(()=>{g.value=!1})}const y=h([]);function a(){ne().then(n=>{y.value=n})}const v=h(""),$=h(!1);function U(){$.value=!0,le(v.value).then(()=>{v.value="",Z.success("兑换成功")}).finally(()=>{$.value=!1})}const R=h([]);function D(){re({status:"ACTIVE"}).then(n=>{R.value=n.list.map(N)})}function N(n){n.reason_label=n.reason||"已使用：0s";const k=n.reason_label.match(/\d+/);return n.reason=k[0],n.percent=100-+n.reason/n.recharge_time*100,n}return E(()=>{c.account_id&&(_(),a(),D())}),(n,k)=>{const j=p("router-link"),V=p("a-divider"),H=p("a-progress"),W=p("a-input"),q=p("a-button"),A=p("a-switch"),F=p("a-statistic"),G=p("a-statistic-countdown");return l(),i("div",$e,[m(c).account_id?(l(),i("div",ze,[e("div",{style:Y({height:m(d).height+"px"}),class:"flex-1 max-h-[352px] overflow-auto scrollbar-width-none bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl"},[e("div",Le,[Re,f(j,{to:"/copilot-package"},{default:w(()=>[je]),_:1})]),(l(!0),i(x,null,C(R.value,r=>(l(),i(x,{key:r.source},[f(V,{class:"m-0"}),e("div",Ie,[e("div",Be,[e("h4",null,u(r.source),1),e("span",null,"总时长："+u(r.recharge_time_label),1)]),f(H,{percent:r.percent,"show-info":!1,class:"mb-0",strokeColor:"#1677ff"},null,8,["percent"]),e("div",Te,[e("span",null,"剩余："+u(m(z)(r.recharge_time-+(r.reason||"0"),"second")),1),e("span",null,"已使用："+u(m(z)(+(r.reason||"0"),"second")),1)])])],64))),128))],4),e("div",{ref_key:"serverRef",ref:s,class:"w-[300px] flex flex-col gap-5 flex-shrink-0"},[e("div",Ue,[e("div",De,[Ne,f(j,{to:"/purse"},{default:w(()=>[Ve]),_:1})]),e("ul",He,[(l(!0),i(x,null,C(y.value,r=>(l(),i("li",{key:r.type_label,class:"flex justify-between"},[e("span",We,u(r.type_label),1),e("span",null,u(r.balance_label),1)]))),128)),e("li",qe,[f(W,{value:v.value,"onUpdate:value":k[0]||(k[0]=r=>v.value=r),placeholder:"兑换码"},null,8,["value"]),f(q,{loading:$.value,type:"primary",onClick:U},{default:w(()=>[ee("充值 ")]),_:1},8,["loading"])])])]),e("div",Ae,[e("ul",null,[e("li",Fe,[Ge,f(A,{checked:o.value.is_paused,"checked-value":0,loading:g.value,"un-checked-value":1,"checked-children":"开",class:"copilot-green","un-checked-children":"关",onClick:S},null,8,["checked","loading"])]),e("li",Pe,[Je,o.value.is_paused===1?(l(),L(F,{key:0,value:m(z)(o.value.remaining_time),"value-style":{color:"#E5E7EB"}},null,8,["value"])):(l(),L(G,{key:1,value:o.value.remaining_time,"value-style":{color:"#E5E7EB"},format:"HH:mm:ss"},null,8,["value"]))])])])],512)])):T("",!0),f(Se)])}}}),Ze=ce(Ke,[["__scopeId","data-v-657cc818"]]);export{Ze as default};
