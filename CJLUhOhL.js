import{u as I}from"./Dj1BjfMp.js";import{d as B,r as _,k as n,w as D,o as F,c as f,e as H,p as v,m as b,E as L,n as u,b as s,F as U,G as Y,l as d,P as g}from"./assets/index-BpUFMd7V.js";import{d as q}from"./D1CHTkIv.js";const z={class:"w-[1200px] m-auto"},E={class:"flex items-start justify-between mb-4"},R=B({__name:"index",setup(M){const h=[{title:"开始时间",dataIndex:"start_time"},{title:"结束时间",dataIndex:"end_time"},{title:"使用时间",dataIndex:"total_chat_req"},{title:"请求次数",dataIndex:"total_prompt_req"},{title:"对话次数",dataIndex:"created_at"},{title:"代码提示次数",dataIndex:"total_time_label"}],t=_({page:1,limit:10}),w=n(!1),r=n(!1),p=n([]),i=n([]),l=_({current:t.page,pageSize:t.limit,hideOnSinglePage:!0,pageSizeOptions:["10","15","20"],showTotal(e){return`共 ${e} 条`},showSizeChanger:!0,onChange(e,o){r.value=!0,t.page=e,t.limit=o,l.current=e,l.pageSize=o},total:0}),{run:m}=I(async()=>q(L(t)).then(e=>{p.value=e.list,l.total=e.total,i.value=e.filter,x(),r.value=!1}),{debounceWait:1e3,manual:!0});function x(){i.value.forEach(e=>{e.options&&(y.value[e.name]=e.options.filter(o=>o.value!==0))})}D(t,()=>{r.value===!1&&(t.page=1,l.current=1),m()});const y=n({});return F(m),(e,o)=>{const k=u("a-form-item"),C=u("a-form"),S=u("a-table");return s(),f("div",z,[H("div",E,[v(C,{class:"filter",layout:"inline"},{default:b(()=>[(s(!0),f(U,null,Y(i.value,a=>(s(),d(k,{key:a.name,label:a.label},{default:b(()=>[a.type==="datetime"?(s(),d(g("a-date-picker"),{key:0,value:t[a.name],"onUpdate:value":c=>t[a.name]=c,placeholder:a.label,"show-time":{format:"HH:mm"},"allow-clear":"",class:"w-[180px!important] mr-2 mb-2",valueFormat:"YYYY-MM-DD HH:mm:ss"},null,40,["value","onUpdate:value","placeholder"])):(s(),d(g("a-"+a.type),{key:1,value:t[a.name],"onUpdate:value":c=>t[a.name]=c,options:a.options,placeholder:a.label,"allow-clear":"",class:"w-[180px!important] mr-2 mb-2"},null,40,["value","onUpdate:value","options","placeholder"]))]),_:2},1032,["label"]))),128))]),_:1})]),v(S,{columns:h,dataSource:p.value,loading:w.value,pagination:l,"row-key":a=>a.session_no,bordered:"",class:"w-full mb-4"},null,8,["dataSource","loading","pagination","row-key"])])}}});export{R as default};
