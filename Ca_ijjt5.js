import{u as B}from"./DyUaDh90.js";import{d as E,r as v,k as r,w as F,o as H,c as m,e as x,p as c,m as i,E as L,n as u,b as l,F as g,G as N,l as _,P as h,v as U,x as V,q as Y,Q as z,t as M}from"./assets/index-B7U8UwVH.js";import{d as O}from"./CiEU5ch9.js";const P={class:"w-[1200px] m-auto"},T={class:"flex items-start justify-between mb-4"},R=x("span",null,"目前统计代码提示不准确，仅供参考",-1),$=E({__name:"index",setup(j){const w=[{title:"开始时间",dataIndex:"start_time"},{title:"结束时间",dataIndex:"end_time"},{title:"使用时间",dataIndex:"total_time_label"},{title:"请求次数",dataIndex:"total_req_label"},{title:"对话次数",dataIndex:"total_req_chat_label"},{title:"代码提示次数",dataIndex:"total_prompt_req_label"}],t=v({page:1,limit:10}),y=r(!1),p=r(!1),f=r([]),d=r([]),o=v({current:t.page,pageSize:t.limit,hideOnSinglePage:!0,pageSizeOptions:["10","15","20"],showTotal(a){return`共 ${a} 条`},showSizeChanger:!0,onChange(a,n){p.value=!0,t.page=a,t.limit=n,o.current=a,o.pageSize=n},total:0}),{run:b}=B(async()=>O(L(t)).then(a=>{f.value=a.list,o.total=a.total,d.value=a.filter,k(),p.value=!1}),{debounceWait:1e3,manual:!0});function k(){d.value.forEach(a=>{a.options&&(C.value[a.name]=a.options.filter(n=>n.value!==0))})}F(t,()=>{p.value===!1&&(t.page=1,o.current=1),b()});const C=r({});return H(b),(a,n)=>{const S=u("a-form-item"),I=u("a-form"),q=u("a-tooltip"),D=u("a-table");return l(),m("div",P,[x("div",T,[c(I,{class:"filter",layout:"inline"},{default:i(()=>[(l(!0),m(g,null,N(d.value,e=>(l(),_(S,{key:e.name,label:e.label},{default:i(()=>[e.type==="datetime"?(l(),_(h("a-date-picker"),{key:0,value:t[e.name],"onUpdate:value":s=>t[e.name]=s,placeholder:e.label,"show-time":{format:"HH:mm"},"allow-clear":"",class:"w-[180px!important] mr-2 mb-2",valueFormat:"YYYY-MM-DD HH:mm:ss"},null,40,["value","onUpdate:value","placeholder"])):(l(),_(h("a-"+e.type),{key:1,value:t[e.name],"onUpdate:value":s=>t[e.name]=s,options:e.options,placeholder:e.label,"allow-clear":"",class:"w-[180px!important] mr-2 mb-2"},null,40,["value","onUpdate:value","options","placeholder"]))]),_:2},1032,["label"]))),128))]),_:1})]),c(D,{columns:w,dataSource:f.value,loading:y.value,pagination:o,"row-key":e=>e.session_no,bordered:"",class:"w-full mb-4"},{headerCell:i(({column:e,title:s})=>[e.dataIndex==="total_prompt_req_label"?(l(),m(g,{key:0},[U(V(s)+" ",1),c(q,{placement:"top"},{title:i(()=>[R]),default:i(()=>[c(Y(z))]),_:1})],64)):M("",!0)]),_:1},8,["dataSource","loading","pagination","row-key"])])}}});export{$ as default};
