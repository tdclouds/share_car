import{g as te,c as se,a as ae,u as oe,q as ne,b as le}from"./DDWsIgKJ.js";import{d as M,r as re,l as c,o as N,m as d,a,c as n,e,F as f,G as S,f as i,q as b,H as ie,n as P,p as y,y as l,t as z,h as ce,i as de,k as V,B as ue,v as F,M as I,I as _e,D as pe,E as ge}from"./assets/index-DH0PMXAA.js";import{f as fe,d as T,g as he}from"./DDR46KYu.js";import{u as ve}from"./BUDjJFW4.js";import{g as xe}from"./D_SPs65N.js";import{_ as G}from"./DlAUqK2U.js";const me={class:"list flex flex-wrap w-[1200px] max-w-full gap-5 mb-5"},ye=["alt","src"],be={class:"p-2 flex-1"},ke={class:"text-2xl"},we={class:"overflow-hidden flex flex-wrap gap-1 my-1"},Ce={key:0,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},Se={class:"flex justify-between items-center"},$e={class:"flex sm:flex-col"},Le={class:"mr-4 text-gray-900 dark:text-gray-300"},Re={class:"text-red-500"},je={class:"image-price"},Ie={class:"text-xl text-blue-600 dark:text-blue-400"},Te=M({__name:"ListProducts",setup(h){const u=re({limit:"20",page:1,search_value:""}),v=c([]),x=c(0),{run:k}=ve(async()=>xe(ie(u)).then(r=>{v.value=r.list,x.value=r.total}),{debounceWait:500,manual:!0});return N(()=>{k()}),(r,g)=>{const m=d("router-link"),$=d("a-pagination");return a(),n(f,null,[e("div",me,[(a(!0),n(f,null,S(v.value,s=>(a(),P(m,{key:s.gd_no,to:"/detail?id="+s.gd_no,class:"translate-x-1 bg-white image-card flex relative pointer w-[590px] max-w-full rounded-xl border transition dark:border-gray-700 overflow-hidden dark:bg-gray-800 dark:shadow-gray-700 hover:text-blue-400 hover:shadow-xl"},{default:y(()=>[e("img",{alt:s.gd_name,src:s.picture,class:"w-[138px] h-[138px]",loading:"lazy"},null,8,ye),e("div",be,[e("h4",ke,l(s.gd_name),1),e("div",we,[(a(!0),n(f,null,S(s.gd_keywords,w=>(a(),n("div",{key:s.gd_no+w,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},l(w),1))),128)),s.is_automatic?(a(),n("div",Ce," 自动发货 ")):z("",!0)]),e("div",Se,[e("p",$e,[e("span",Le,"库存："+l(s.in_stock),1),e("span",Re,"已售："+l(s.sales_volume),1)]),e("p",je,[e("span",Ie,l(b(fe)(s.retail_price)),1)])])])]),_:2},1032,["to"]))),128))]),i($,{current:u.page,"onUpdate:current":g[0]||(g[0]=s=>u.page=s),size:u.limit,"onUpdate:size":g[1]||(g[1]=s=>u.limit=s),total:x.value,"hide-on-single-page":"","show-less-items":"",onChange:b(k)},null,8,["current","size","total","onChange"])],64)}}}),ze=G(Te,[["__scopeId","data-v-8372562c"]]),p=h=>(pe("data-v-44bebc68"),h=h(),ge(),h),qe={class:"home flex flex-col items-center gap-5"},Ue={key:0,class:"flex flex-wrap w-[1200px] max-w-full sm:flex-col-reverse gap-5"},Be={class:"p-5 flex justify-between items-center"},De=p(()=>e("h4",null,"套餐",-1)),Ee=p(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),Ve={key:0,class:"h-full overflow-auto scrollbar-width-none flex-1"},Fe={class:"hover:bg-gray-100 dark:hover:bg-gray-900 p-5"},Me={class:"flex items-center justify-between"},Ne={class:"flex items-center justify-between"},Pe={key:1},Ge={class:"h-full flex items-center justify-center"},Ae={class:"copilot-box rounded-xl p-5"},He={class:"flex justify-between mb-2"},We=p(()=>e("span",{class:"font-bold text-gray-50"},"Copilot",-1)),Je={class:"flex justify-between items-center text-gray-200"},Ke=p(()=>e("span",{class:""},"剩余时间",-1)),Oe={class:"text-2xl"},Qe={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},Xe={class:"flex justify-between items-center mb-2"},Ye=p(()=>e("h4",{class:""},"我的钱包",-1)),Ze=p(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),et={class:"flex flex-col gap-2"},tt={class:"text-gray-600 dark:text-gray-200"},st={class:"flex flex-col justify-between gap-2"},at={class:"flex gap-2"},ot={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},nt=p(()=>e("span",null,"服务器时间：",-1)),lt={class:"text-blue-500"},rt=M({__name:"index",setup(h){const u=c(),v=c({width:0,height:0}),x=ce(),k=de(),r=c({paused_time:void 0,remaining_time:0,start_time:void 0,is_paused:1}),g=V(()=>T(r.value.remaining_time,"second"));function m(){r.value.is_paused!=1&&setTimeout(()=>{r.value.remaining_time-=1,m()},1e3)}function $(){te().then(t=>{r.value=t,m()})}const s=c(!1);function w(){s.value=!0,se().then(t=>{r.value.remaining_time=t.remaining_time,r.value.is_paused=t.is_paused,m()}).finally(()=>{s.value=!1})}const q=c([]);function U(){ae().then(t=>{q.value=t}).finally(()=>{O()})}const _=c(""),L=c(!1);function A(){if(!_.value){I.warn({title:"请输入兑换码"});return}L.value=!0,oe(_.value).then(()=>{_.value="",U(),_e.success("兑换成功")}).finally(()=>{L.value=!1})}const R=c(!1);function H(){if(!_.value){I.warn({title:"请输入兑换码"});return}R.value=!0,ne(_.value).then(()=>{_.value="",I.success({title:"兑换码有效"})}).finally(()=>{R.value=!1})}const j=c([]);function W(){le({status:"ACTIVE",order_by:"asc"}).then(t=>{j.value=t.list.map(J)})}function J(t){t.reason_label=t.reason||"已使用：0s";const C=t.reason_label.match(/\d+/);return t.reason=C[0],t.percent=100-+t.reason/t.recharge_time*100,t}const K=V(()=>he(k.timeStamp));function O(){const t=getComputedStyle(u.value);v.value={width:parseFloat(t.width),height:parseFloat(t.height)}}return N(()=>{x.account_id&&($(),U(),W())}),(t,C)=>{const B=d("router-link"),D=d("a-divider"),Q=d("a-progress"),X=d("a-empty"),Y=d("a-switch"),Z=d("a-input"),E=d("a-button");return a(),n("div",qe,[b(x).account_id?(a(),n("div",Ue,[e("div",{style:ue({height:v.value.height+"px"}),class:"flex-1 sm:min-w-[300px] flex flex-col bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl overflow-hidden"},[e("div",Be,[De,i(B,{to:"/copilot-package"},{default:y(()=>[Ee]),_:1})]),i(D,{class:"m-0"}),j.value.length?(a(),n("div",Ve,[(a(!0),n(f,null,S(j.value,(o,ee)=>(a(),n(f,{key:o.source},[ee!=0?(a(),P(D,{key:0,class:"m-0"})):z("",!0),e("div",Fe,[e("div",Me,[e("h4",null,l(o.source),1),e("span",null,"总时长："+l(o.recharge_time_label),1)]),i(Q,{percent:o.percent,"show-info":!1,class:"mb-0",strokeColor:"#1677ff"},null,8,["percent"]),e("div",Ne,[e("span",null,"剩余："+l(b(T)(o.recharge_time-+(o.reason||"0"),"second")),1),e("span",null,"已使用："+l(b(T)(+(o.reason||"0"),"second")),1)])])],64))),128))])):(a(),n("div",Pe,[e("div",Ge,[i(X)])]))],4),e("div",{ref_key:"serverRef",ref:u,class:"w-[300px] sm:w-full flex flex-col gap-5 flex-shrink-0"},[e("div",Ae,[e("ul",null,[e("li",He,[We,i(Y,{checked:r.value.is_paused,"checked-value":0,loading:s.value,"un-checked-value":1,"checked-children":"开",class:"copilot-green","un-checked-children":"关",onClick:w},null,8,["checked","loading"])]),e("li",Je,[Ke,e("span",Oe,l(g.value),1)])])]),e("div",Qe,[e("div",Xe,[Ye,i(B,{to:"/purse"},{default:y(()=>[Ze]),_:1})]),e("ul",et,[(a(!0),n(f,null,S(q.value,o=>(a(),n("li",{key:o.type_label,class:"flex justify-between"},[e("span",tt,l(o.type_label),1),e("span",null,l(o.balance_label),1)]))),128)),e("li",st,[i(Z,{value:_.value,"onUpdate:value":C[0]||(C[0]=o=>_.value=o),valueModifiers:{trim:!0},"allow-clear":"",placeholder:"兑换码"},null,8,["value"]),e("div",at,[i(E,{loading:R.value,class:"flex-1",onClick:H},{default:y(()=>[F("查询 ")]),_:1},8,["loading"]),i(E,{loading:L.value,type:"primary",class:"flex-1",onClick:A},{default:y(()=>[F("充值 ")]),_:1},8,["loading"])])])])]),e("div",ot,[nt,e("span",lt,l(K.value),1)])],512)])):z("",!0),i(ze)])}}}),gt=G(rt,[["__scopeId","data-v-44bebc68"]]);export{gt as default};
