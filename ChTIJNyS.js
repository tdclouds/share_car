import{g as te,c as se,a as ae,u as oe,q as ne,b as le}from"./31tV4jmc.js";import{d as N,m as re,r as i,o as P,a as _,b as a,c as n,g as e,e as r,F as g,G as $,t as w,H as ie,q as G,w as b,y as l,v as S,j as ce,k as de,n as V,B as ue,f as M,M as U,I as _e,D as pe,E as fe}from"./assets/index-7qXwt3lj.js";import{f as he,d as q,g as ge}from"./DLMbyc8M.js";import{u as ve}from"./CCtYOPxw.js";import{g as xe}from"./CfHS-8xj.js";import{_ as H}from"./DlAUqK2U.js";const me={class:"flex w-full max-w-[1200px]"},ye={class:"ml-auto sm:w-full"},be={class:"list flex flex-wrap w-[1200px] max-w-full gap-5 mb-5"},we=["alt","src"],ke={class:"p-2 flex-1"},Ce={class:"text-2xl"},Se={class:"overflow-hidden flex flex-wrap gap-1 my-1"},$e={key:0,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},je={class:"flex justify-between items-center"},Le={class:"flex sm:flex-col"},Re={class:"mr-4 text-gray-900 dark:text-gray-300"},Ie={class:"text-red-500"},ze={class:"image-price"},Te={class:"text-xl text-blue-600 dark:text-blue-400"},Ue=N({__name:"ListProducts",setup(v){const c=re({limit:10,page:1,search_value:""}),x=i([]),m=i(0),j=i([]),{run:d}=ve(async()=>xe(ie(c)).then(p=>{x.value=p.list,m.value=p.total,j.value=p.filter}),{debounceWait:500,manual:!0});function L(){c.page=1,d()}return P(()=>{d()}),(p,f)=>{const y=_("a-input-search"),R=_("router-link"),k=_("a-pagination");return a(),n(g,null,[e("div",me,[e("div",ye,[r(y,{value:c.search_value,"onUpdate:value":f[0]||(f[0]=s=>c.search_value=s),onSearch:L,class:"sm:flex-1 min-w-[320px]",size:"large",prefixCls:"flex items-center ant-input-search",placeholder:"搜索","enter-button":""},null,8,["value"])])]),e("div",be,[(a(!0),n(g,null,$(x.value,s=>(a(),G(R,{key:s.gd_no,to:"/detail?id="+s.gd_no,class:"translate-x-1 bg-white image-card flex relative pointer w-[590px] max-w-full rounded-xl border transition dark:border-gray-700 overflow-hidden dark:bg-gray-800 dark:shadow-gray-700 hover:text-blue-400 hover:shadow-xl"},{default:b(()=>[e("img",{alt:s.gd_name,src:s.picture,class:"w-[138px] h-[138px]",loading:"lazy"},null,8,we),e("div",ke,[e("h4",Ce,l(s.gd_name),1),e("div",Se,[(a(!0),n(g,null,$(s.gd_keywords,u=>(a(),n("div",{key:s.gd_no+u,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},l(u),1))),128)),s.is_automatic?(a(),n("div",$e," 自动发货 ")):S("",!0)]),e("div",je,[e("p",Le,[e("span",Re,"库存："+l(s.in_stock),1),e("span",Ie,"已售："+l(s.sales_volume),1)]),e("p",ze,[e("span",Te,l(w(he)(s.retail_price)),1)])])])]),_:2},1032,["to"]))),128))]),r(k,{current:c.page,"onUpdate:current":f[1]||(f[1]=s=>c.page=s),size:c.limit,"onUpdate:size":f[2]||(f[2]=s=>c.limit=s),total:m.value,"hide-on-single-page":"","show-less-items":"",onChange:w(d)},null,8,["current","size","total","onChange"])],64)}}}),qe=H(Ue,[["__scopeId","data-v-92483bb1"]]),h=v=>(pe("data-v-58f7aa4a"),v=v(),fe(),v),Be={class:"home flex flex-col items-center gap-5"},De={key:0,class:"flex flex-wrap w-[1200px] max-w-full sm:flex-col-reverse gap-5"},Ee={class:"p-5 flex justify-between items-center"},Fe=h(()=>e("h4",null,"套餐",-1)),Ve=h(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),Me={key:0,class:"h-full overflow-auto scrollbar-width-none flex-1"},Ne={class:"hover:bg-gray-100 dark:hover:bg-gray-900 p-5"},Pe={class:"flex items-center justify-between"},Ge={class:"flex items-center justify-between"},He={key:0},Ae={key:1},We={class:"h-full flex items-center justify-center"},Je={class:"copilot-box rounded-xl p-5"},Ke={class:"flex justify-between mb-2"},Oe=h(()=>e("span",{class:"font-bold text-gray-50"},"Copilot",-1)),Qe={class:"flex justify-between items-center text-gray-200"},Xe=h(()=>e("span",{class:""},"剩余时间",-1)),Ye={class:"text-2xl"},Ze={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},et={class:"flex justify-between items-center mb-2"},tt=h(()=>e("h4",{class:""},"我的钱包",-1)),st=h(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),at={class:"flex flex-col gap-2"},ot={class:"text-gray-600 dark:text-gray-200"},nt={class:"flex flex-col justify-between gap-2"},lt={class:"flex gap-2"},rt={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},it=h(()=>e("span",null,"服务器时间：",-1)),ct={class:"text-blue-500"},dt=N({__name:"index",setup(v){const c=i(),x=i({width:0,height:0}),m=ce(),j=de(),d=i({paused_time:void 0,remaining_time:0,start_time:void 0,is_paused:1}),L=V(()=>q(d.value.remaining_time,"second"));function p(){d.value.is_paused!=1&&(d.value.remaining_time-=1,setTimeout(p,1e3))}function f(){te().then(t=>{d.value=t,p()})}const y=i(!1);function R(){y.value=!0,se().then(t=>{d.value.remaining_time=t.remaining_time,d.value.is_paused=t.is_paused,B(),p()}).finally(()=>{y.value=!1})}const k=i([]);function s(){ae().then(t=>{k.value=t}).finally(()=>{O()})}const u=i(""),I=i(!1);function A(){if(!u.value){U.warn({title:"请输入兑换码"});return}I.value=!0,oe(u.value).then(()=>{u.value="",s(),_e.success("兑换成功")}).finally(()=>{I.value=!1})}const z=i(!1);function W(){if(!u.value){U.warn({title:"请输入兑换码"});return}z.value=!0,ne(u.value).then(()=>{u.value="",U.success({title:"兑换码有效"})}).finally(()=>{z.value=!1})}const T=i([]);function B(){le({status:"ACTIVE",order_by:"asc"}).then(t=>{T.value=t.list.map(J)})}function J(t){t.reason_label=t.reason||"已使用：0s";const C=t.reason_label.match(/\d+/);return t.reason=C[0],t.percent=100-+t.reason/t.recharge_time*100,t}const K=V(()=>ge(j.timeStamp));function O(){const t=getComputedStyle(c.value);x.value={width:parseFloat(t.width),height:parseFloat(t.height)}}return P(()=>{m.account_id&&(f(),s(),B())}),(t,C)=>{const D=_("router-link"),E=_("a-divider"),Q=_("a-progress"),X=_("a-empty"),Y=_("a-switch"),Z=_("a-input"),F=_("a-button");return a(),n("div",Be,[w(m).account_id?(a(),n("div",De,[e("div",{style:ue({height:x.value.height+"px"}),class:"flex-1 sm:min-w-[300px] flex flex-col bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl overflow-hidden"},[e("div",Ee,[Fe,r(D,{to:"/copilot-package"},{default:b(()=>[Ve]),_:1})]),r(E,{class:"m-0"}),T.value.length?(a(),n("div",Me,[(a(!0),n(g,null,$(T.value,(o,ee)=>(a(),n(g,{key:o.source},[ee!=0?(a(),G(E,{key:0,class:"m-0"})):S("",!0),e("div",Ne,[e("div",Pe,[e("h4",null,l(o.source),1),e("span",null,"总时长："+l(o.recharge_time_label),1)]),r(Q,{percent:o.percent,"show-info":!1,class:"mb-0",strokeColor:"#1677ff"},null,8,["percent"]),e("div",Ge,[e("span",null,"剩余："+l(w(q)(o.recharge_time-+(o.reason||"0"),"second")),1),o.expire_time?(a(),n("span",He,"过期时间："+l(o.expire_time),1)):S("",!0),e("span",null,"已使用："+l(w(q)(+(o.reason||"0"),"second")),1)])])],64))),128))])):(a(),n("div",Ae,[e("div",We,[r(X)])]))],4),e("div",{ref_key:"serverRef",ref:c,class:"w-[320px] sm:w-full flex flex-col gap-5 flex-shrink-0"},[e("div",Je,[e("ul",null,[e("li",Ke,[Oe,r(Y,{checked:d.value.is_paused,"checked-value":0,loading:y.value,"un-checked-value":1,"checked-children":"开",class:"copilot-green","un-checked-children":"关",onClick:R},null,8,["checked","loading"])]),e("li",Qe,[Xe,e("span",Ye,l(L.value),1)])])]),e("div",Ze,[e("div",et,[tt,r(D,{to:"/purse"},{default:b(()=>[st]),_:1})]),e("ul",at,[(a(!0),n(g,null,$(k.value,o=>(a(),n("li",{key:o.type_label,class:"flex justify-between"},[e("span",ot,l(o.type_label),1),e("span",null,l(o.balance_label||"0"),1)]))),128)),e("li",nt,[r(Z,{value:u.value,"onUpdate:value":C[0]||(C[0]=o=>u.value=o),valueModifiers:{trim:!0},"allow-clear":"",placeholder:"兑换码"},null,8,["value"]),e("div",lt,[r(F,{loading:z.value,class:"flex-1",onClick:W},{default:b(()=>[M("查询 ")]),_:1},8,["loading"]),r(F,{loading:I.value,type:"primary",class:"flex-1",onClick:A},{default:b(()=>[M("充值 ")]),_:1},8,["loading"])])])])]),e("div",rt,[it,e("span",ct,l(K.value),1)])],512)])):S("",!0),r(qe)])}}}),vt=H(dt,[["__scopeId","data-v-58f7aa4a"]]);export{vt as default};
