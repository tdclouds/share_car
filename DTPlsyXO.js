import{g as te,c as se,a as ae,u as oe,q as le,b as ne}from"./DM83sN2f.js";import{d as M,r as re,l as i,o as N,m as _,a,c as l,e,f as r,F as g,G as S,q as w,H as ie,n as P,p as b,y as n,t as q,h as ce,i as de,k as F,B as ue,v as V,M as T,I as _e,D as pe,E as fe}from"./assets/index-CIatnCkt.js";import{f as he,d as U,g as ge}from"./DvK4hvLk.js";import{u as ve}from"./sx_zPZx-.js";import{g as xe}from"./FrXkzOPO.js";import{_ as G}from"./DlAUqK2U.js";const me={class:"flex w-full max-w-[1200px]"},ye={class:"ml-auto sm:w-full"},be={class:"list flex flex-wrap w-[1200px] max-w-full gap-5 mb-5"},we=["alt","src"],ke={class:"p-2 flex-1"},Ce={class:"text-2xl"},Se={class:"overflow-hidden flex flex-wrap gap-1 my-1"},$e={key:0,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},Le={class:"flex justify-between items-center"},Re={class:"flex sm:flex-col"},je={class:"mr-4 text-gray-900 dark:text-gray-300"},Ie={class:"text-red-500"},ze={class:"image-price"},Te={class:"text-xl text-blue-600 dark:text-blue-400"},Ue=M({__name:"ListProducts",setup(v){const c=re({limit:10,page:1,search_value:""}),x=i([]),m=i(0),$=i([]),{run:d}=ve(async()=>xe(ie(c)).then(p=>{x.value=p.list,m.value=p.total,$.value=p.filter}),{debounceWait:500,manual:!0});function L(){c.page=1,d()}return N(()=>{d()}),(p,f)=>{const y=_("a-input-search"),R=_("router-link"),k=_("a-pagination");return a(),l(g,null,[e("div",me,[e("div",ye,[r(y,{value:c.search_value,"onUpdate:value":f[0]||(f[0]=s=>c.search_value=s),onSearch:L,class:"sm:flex-1",size:"large",prefixCls:"flex items-center ant-input-search",placeholder:"搜索","enter-button":""},null,8,["value"])])]),e("div",be,[(a(!0),l(g,null,S(x.value,s=>(a(),P(R,{key:s.gd_no,to:"/detail?id="+s.gd_no,class:"translate-x-1 bg-white image-card flex relative pointer w-[590px] max-w-full rounded-xl border transition dark:border-gray-700 overflow-hidden dark:bg-gray-800 dark:shadow-gray-700 hover:text-blue-400 hover:shadow-xl"},{default:b(()=>[e("img",{alt:s.gd_name,src:s.picture,class:"w-[138px] h-[138px]",loading:"lazy"},null,8,we),e("div",ke,[e("h4",Ce,n(s.gd_name),1),e("div",Se,[(a(!0),l(g,null,S(s.gd_keywords,u=>(a(),l("div",{key:s.gd_no+u,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},n(u),1))),128)),s.is_automatic?(a(),l("div",$e," 自动发货 ")):q("",!0)]),e("div",Le,[e("p",Re,[e("span",je,"库存："+n(s.in_stock),1),e("span",Ie,"已售："+n(s.sales_volume),1)]),e("p",ze,[e("span",Te,n(w(he)(s.retail_price)),1)])])])]),_:2},1032,["to"]))),128))]),r(k,{current:c.page,"onUpdate:current":f[1]||(f[1]=s=>c.page=s),size:c.limit,"onUpdate:size":f[2]||(f[2]=s=>c.limit=s),total:m.value,"hide-on-single-page":"","show-less-items":"",onChange:w(d)},null,8,["current","size","total","onChange"])],64)}}}),qe=G(Ue,[["__scopeId","data-v-58b21548"]]),h=v=>(pe("data-v-5be4cd36"),v=v(),fe(),v),Be={class:"home flex flex-col items-center gap-5"},De={key:0,class:"flex flex-wrap w-[1200px] max-w-full sm:flex-col-reverse gap-5"},Ee={class:"p-5 flex justify-between items-center"},Fe=h(()=>e("h4",null,"套餐",-1)),Ve=h(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),Me={key:0,class:"h-full overflow-auto scrollbar-width-none flex-1"},Ne={class:"hover:bg-gray-100 dark:hover:bg-gray-900 p-5"},Pe={class:"flex items-center justify-between"},Ge={class:"flex items-center justify-between"},He={key:1},Ae={class:"h-full flex items-center justify-center"},We={class:"copilot-box rounded-xl p-5"},Je={class:"flex justify-between mb-2"},Ke=h(()=>e("span",{class:"font-bold text-gray-50"},"Copilot",-1)),Oe={class:"flex justify-between items-center text-gray-200"},Qe=h(()=>e("span",{class:""},"剩余时间",-1)),Xe={class:"text-2xl"},Ye={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},Ze={class:"flex justify-between items-center mb-2"},et=h(()=>e("h4",{class:""},"我的钱包",-1)),tt=h(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),st={class:"flex flex-col gap-2"},at={class:"text-gray-600 dark:text-gray-200"},ot={class:"flex flex-col justify-between gap-2"},lt={class:"flex gap-2"},nt={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},rt=h(()=>e("span",null,"服务器时间：",-1)),it={class:"text-blue-500"},ct=M({__name:"index",setup(v){const c=i(),x=i({width:0,height:0}),m=ce(),$=de(),d=i({paused_time:void 0,remaining_time:0,start_time:void 0,is_paused:1}),L=F(()=>U(d.value.remaining_time,"second"));function p(){d.value.is_paused!=1&&setTimeout(()=>{d.value.remaining_time-=1,p()},1e3)}function f(){te().then(t=>{d.value=t,p()})}const y=i(!1);function R(){y.value=!0,se().then(t=>{d.value.remaining_time=t.remaining_time,d.value.is_paused=t.is_paused,p()}).finally(()=>{y.value=!1})}const k=i([]);function s(){ae().then(t=>{k.value=t}).finally(()=>{O()})}const u=i(""),j=i(!1);function H(){if(!u.value){T.warn({title:"请输入兑换码"});return}j.value=!0,oe(u.value).then(()=>{u.value="",s(),_e.success("兑换成功")}).finally(()=>{j.value=!1})}const I=i(!1);function A(){if(!u.value){T.warn({title:"请输入兑换码"});return}I.value=!0,le(u.value).then(()=>{u.value="",T.success({title:"兑换码有效"})}).finally(()=>{I.value=!1})}const z=i([]);function W(){ne({status:"ACTIVE",order_by:"asc"}).then(t=>{z.value=t.list.map(J)})}function J(t){t.reason_label=t.reason||"已使用：0s";const C=t.reason_label.match(/\d+/);return t.reason=C[0],t.percent=100-+t.reason/t.recharge_time*100,t}const K=F(()=>ge($.timeStamp));function O(){const t=getComputedStyle(c.value);x.value={width:parseFloat(t.width),height:parseFloat(t.height)}}return N(()=>{m.account_id&&(f(),s(),W())}),(t,C)=>{const B=_("router-link"),D=_("a-divider"),Q=_("a-progress"),X=_("a-empty"),Y=_("a-switch"),Z=_("a-input"),E=_("a-button");return a(),l("div",Be,[w(m).account_id?(a(),l("div",De,[e("div",{style:ue({height:x.value.height+"px"}),class:"flex-1 sm:min-w-[300px] flex flex-col bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl overflow-hidden"},[e("div",Ee,[Fe,r(B,{to:"/copilot-package"},{default:b(()=>[Ve]),_:1})]),r(D,{class:"m-0"}),z.value.length?(a(),l("div",Me,[(a(!0),l(g,null,S(z.value,(o,ee)=>(a(),l(g,{key:o.source},[ee!=0?(a(),P(D,{key:0,class:"m-0"})):q("",!0),e("div",Ne,[e("div",Pe,[e("h4",null,n(o.source),1),e("span",null,"总时长："+n(o.recharge_time_label),1)]),r(Q,{percent:o.percent,"show-info":!1,class:"mb-0",strokeColor:"#1677ff"},null,8,["percent"]),e("div",Ge,[e("span",null,"剩余："+n(w(U)(o.recharge_time-+(o.reason||"0"),"second")),1),e("span",null,"已使用："+n(w(U)(+(o.reason||"0"),"second")),1)])])],64))),128))])):(a(),l("div",He,[e("div",Ae,[r(X)])]))],4),e("div",{ref_key:"serverRef",ref:c,class:"w-[320px] sm:w-full flex flex-col gap-5 flex-shrink-0"},[e("div",We,[e("ul",null,[e("li",Je,[Ke,r(Y,{checked:d.value.is_paused,"checked-value":0,loading:y.value,"un-checked-value":1,"checked-children":"开",class:"copilot-green","un-checked-children":"关",onClick:R},null,8,["checked","loading"])]),e("li",Oe,[Qe,e("span",Xe,n(L.value),1)])])]),e("div",Ye,[e("div",Ze,[et,r(B,{to:"/purse"},{default:b(()=>[tt]),_:1})]),e("ul",st,[(a(!0),l(g,null,S(k.value,o=>(a(),l("li",{key:o.type_label,class:"flex justify-between"},[e("span",at,n(o.type_label),1),e("span",null,n(o.balance_label||"0"),1)]))),128)),e("li",ot,[r(Z,{value:u.value,"onUpdate:value":C[0]||(C[0]=o=>u.value=o),valueModifiers:{trim:!0},"allow-clear":"",placeholder:"兑换码"},null,8,["value"]),e("div",lt,[r(E,{loading:I.value,class:"flex-1",onClick:A},{default:b(()=>[V("查询 ")]),_:1},8,["loading"]),r(E,{loading:j.value,type:"primary",class:"flex-1",onClick:H},{default:b(()=>[V("充值 ")]),_:1},8,["loading"])])])])]),e("div",nt,[rt,e("span",it,n(K.value),1)])],512)])):q("",!0),r(qe)])}}}),gt=G(ct,[["__scopeId","data-v-5be4cd36"]]);export{gt as default};
