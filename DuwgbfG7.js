import{u as V}from"./DcobbjRN.js";import{d as z,P as Y,Q as O,l as d,o as B,m as p,a as c,n as g,p as t,f as l,v as u,y as n,r as R,w as T,c as k,e as a,F as U,G as j,t as $,H as E,R as I,z as P}from"./assets/index-BQ9Z0zL7.js";import{b as S,d as q}from"./CLuGU8Vn.js";const G=z({__name:"OrderDetailModal",props:Y({currentId:{}},{visible:{type:Boolean},visibleModifiers:{}}),emits:["update:visible"],setup(D){const o=D,m=O(D,"visible"),s=d({buy_ip:"",buy_num:0,content:"",gd_no:"",order_no:"",pay_price:0,pay_price_label:"",payment_channel:null,price:0,price_label:"",status:0,title:"",trade_no:"",type:0,type_label:""}),f=d(!1);function b(){S(o.currentId).then(x=>{s.value=x}).finally(()=>{f.value=!1})}return B(()=>{b()}),(x,y)=>{const r=p("a-form-item"),h=p("a-form"),C=p("a-spin"),v=p("a-modal");return c(),g(v,{open:m.value,"onUpdate:open":y[0]||(y[0]=M=>m.value=M),title:"订单详情"},{footer:t(()=>[]),default:t(()=>[l(C,{spinning:f.value},{default:t(()=>[l(h,{"label-col":{span:5},"wrapper-col":{span:16}},{default:t(()=>[l(r),l(r,{label:"订单编号",name:"source"},{default:t(()=>[u(n(s.value.order_no),1)]),_:1}),l(r,{label:"订单标题",name:"source"},{default:t(()=>[u(n(s.value.title),1)]),_:1}),l(r,{label:"订单类型",name:"source"},{default:t(()=>[u(n(s.value.type_label),1)]),_:1}),l(r,{label:"付款渠道",name:"source"},{default:t(()=>[u(n(s.value.payment_channel||"无"),1)]),_:1}),l(r,{label:"订单状态",name:"source"},{default:t(()=>[u(n(s.value.status),1)]),_:1}),l(r,{label:"第三方事务号",name:"source"},{default:t(()=>[u(n(s.value.trade_no||"无"),1)]),_:1}),l(r,{label:"购买数量",name:"source"},{default:t(()=>[u(n(s.value.buy_num),1)]),_:1}),l(r,{label:"下单IP",name:"source"},{default:t(()=>[u(n(s.value.buy_ip),1)]),_:1}),l(r,{label:"订单金额",name:"source"},{default:t(()=>[u(n(s.value.price_label),1)]),_:1}),l(r,{label:"订单支付金额",name:"source"},{default:t(()=>[u(n(s.value.pay_price_label),1)]),_:1})]),_:1})]),_:1},8,["spinning"])]),_:1},8,["open"])}}}),Q={class:"w-[1200px] max-w-full m-auto"},W={class:"flex items-start justify-between mb-4"},A={class:"list-box flex flex-wrap gap-5 mb-5"},J={class:"flex items-center justify-between"},K=["onClick"],X={class:"flex items-center justify-between"},Z={class:"flex items-center justify-between"},ee=a("div",{class:"label text-gray-600 mt-2"},"订单金额",-1),ae={class:"content text-gray-600"},te={class:"flex items-center justify-between"},le=a("div",{class:"label text-gray-600 mt-2"},"订单支付金额",-1),ne={class:"content"},se={class:"flex items-center justify-between"},oe=a("div",{class:"label text-gray-600 mt-2"},"付款渠道",-1),re={class:"content"},de=z({__name:"index",setup(D){const o=R({end_time:"",gd_no:"",order_no:"",start_time:"",page:1,limit:15}),m=d(!1),s=d([]),f=d(0),b=d([]);function x(){m.value=!0}const{run:y}=V(async()=>q(E(o)).then(i=>{s.value=i.list,f.value=i.total,b.value=i.filter,r(),m.value=!1}),{debounceWait:1e3,manual:!0});function r(){b.value.forEach(i=>{i.options&&(C.value[i.name]=i.options.filter(_=>_.value!==0))})}T(o,()=>{m.value===!1&&(o.page=1),y()});const h=d(""),C=d({}),v=d(!1);function M(i){h.value=(i==null?void 0:i.order_no)||"",v.value=!0}return B(y),(i,_)=>{const H=p("a-form-item"),L=p("a-form"),F=p("a-divider"),N=p("a-pagination");return c(),k("div",Q,[a("div",W,[l(L,{class:"filter sm:hidden",layout:"inline"},{default:t(()=>[(c(!0),k(U,null,j(b.value,e=>(c(),g(H,{key:e.name,label:e.label},{default:t(()=>[e.type==="datetime"?(c(),g(I("a-date-picker"),{key:0,value:o[e.name],"onUpdate:value":w=>o[e.name]=w,placeholder:e.label,"show-time":{format:"HH:mm"},"allow-clear":"",class:"w-[180px!important] mr-2 mb-2",valueFormat:"YYYY-MM-DD HH:mm:ss"},null,40,["value","onUpdate:value","placeholder"])):(c(),g(I("a-"+e.type),{key:1,value:o[e.name],"onUpdate:value":w=>o[e.name]=w,options:e.options,placeholder:e.label,"allow-clear":"",class:"w-[180px!important] mr-2 mb-2"},null,40,["value","onUpdate:value","options","placeholder"]))]),_:2},1032,["label"]))),128))]),_:1})]),a("div",A,[(c(!0),k(U,null,j(s.value,e=>(c(),k("div",{class:"bg-white dark:bg-gray-800 p-4 rounded sm:w-full",key:e.order_no},[a("div",J,[a("span",null,n(e.order_no),1),a("span",{class:"text-blue-600 ml-2",onClick:w=>M(e)},"详情 ",8,K)]),l(F,{class:"my-2"}),a("div",X,[a("div",null,n(e.title),1),a("div",{class:P({100:"text-gray-600",200:"text-orange-500",201:"text-blue-600",202:"text-green-600",300:"text-gray-500",400:"text-red-500",403:"text-gray-500"}[e.status])},n(e.status_label),3)]),a("div",Z,[ee,a("div",ae,n(e.price_label),1)]),a("div",te,[le,a("div",ne,n(e.pay_price_label),1)]),a("div",se,[oe,a("div",re,n(e.payment_channel),1)])]))),128))]),l(N,{class:"flex justify-center",current:o.page,"onUpdate:current":_[0]||(_[0]=e=>o.page=e),"page-size":o.limit,"onUpdate:pageSize":_[1]||(_[1]=e=>o.limit=e),total:f.value,"hide-on-single-page":!0,onChange:x,"show-total":e=>`共 ${e} 条`},null,8,["current","page-size","total","show-total"]),v.value?(c(),g(G,{key:0,visible:v.value,"onUpdate:visible":_[2]||(_[2]=e=>v.value=e),currentId:h.value},null,8,["visible","currentId"])):$("",!0)])}}});export{de as default};
