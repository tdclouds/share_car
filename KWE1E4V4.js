import{g as oe,c as ne,a as le,u as re,q as ie,b as ce}from"./BCI6QvvS.js";import{d as G,m as de,r as n,o as H,a as _,b as a,c as l,g as e,e as i,F as g,I as j,t as k,J as ue,q as A,w,y as r,v as $,j as _e,k as pe,n as N,B as fe,f as P,M as q,K as he,G as ge,H as ve}from"./assets/index-BxJ_DNlw.js";import{f as me,d as E,g as xe}from"./C0xcr2QV.js";import{u as ye}from"./CjyJRG-f.js";import{g as be}from"./DyAHh3My.js";import{_ as J}from"./DlAUqK2U.js";const we={class:"flex w-full max-w-[1200px]"},ke={class:"ml-auto sm:w-full"},Ce={class:"list flex flex-wrap w-[1200px] max-w-full gap-5 mb-5"},Se=["alt","src"],$e={class:"p-2 flex-1"},je={class:"text-2xl"},Le={class:"overflow-hidden flex flex-wrap gap-1 my-2"},Te={key:0,class:"py-1 px-2 mr-1 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},Re={class:"flex justify-between items-center"},Ie={class:"flex sm:flex-col"},ze={class:"mr-4 text-gray-900 dark:text-gray-300"},Ue={class:"text-red-500"},qe={class:"image-price"},Ee={class:"text-xl text-blue-600 dark:text-blue-400"},Be=G({__name:"ListProducts",setup(v){const c=de({limit:10,page:1,search_value:""}),m=n([]),x=n(0),L=n([]),{run:d}=ye(async()=>be(ue(c)).then(f=>{m.value=f.list,x.value=f.total,L.value=f.filter}),{debounceWait:500,manual:!0});function T(){c.page=1,d()}return H(()=>{d()}),(f,u)=>{const C=_("a-input-search"),y=_("router-link"),R=_("a-pagination");return a(),l(g,null,[e("div",we,[e("div",ke,[i(C,{value:c.search_value,"onUpdate:value":u[0]||(u[0]=s=>c.search_value=s),onSearch:T,class:"sm:flex-1 min-w-[320px]",size:"large",prefixCls:"flex items-center ant-input-search",placeholder:"搜索","enter-button":""},null,8,["value"])])]),e("div",Ce,[(a(!0),l(g,null,j(m.value,s=>(a(),A(y,{key:s.gd_no,to:"/detail?id="+s.gd_no,class:"translate-x-1 bg-white image-card flex relative pointer w-[590px] max-w-full rounded-xl border transition dark:border-gray-700 overflow-hidden dark:bg-gray-800 dark:shadow-gray-700 hover:text-blue-400 hover:shadow-xl"},{default:w(()=>[e("img",{alt:s.gd_name,src:s.picture,class:"w-[138px] h-full object-contain",loading:"lazy"},null,8,Se),e("div",$e,[e("h4",je,r(s.gd_name),1),e("div",Le,[(a(!0),l(g,null,j(s.gd_keywords,b=>(a(),l("div",{key:s.gd_no+b,class:"py-1 px-2 rounded bg-gray-200 text-gray-800 dark:bg-gray-500 dark:text-gray-200"},r(b),1))),128)),s.is_automatic?(a(),l("div",Te," 自动发货 ")):$("",!0)]),e("div",Re,[e("p",Ie,[e("span",ze,"库存："+r(s.in_stock),1),e("span",Ue,"已售："+r(s.sales_volume),1)]),e("p",qe,[e("span",Ee,r(k(me)(s.retail_price)),1)])])])]),_:2},1032,["to"]))),128))]),i(R,{current:c.page,"onUpdate:current":u[1]||(u[1]=s=>c.page=s),size:c.limit,"onUpdate:size":u[2]||(u[2]=s=>c.limit=s),total:x.value,"hide-on-single-page":"","show-less-items":"",onChange:k(d)},null,8,["current","size","total","onChange"])],64)}}}),Fe=J(Be,[["__scopeId","data-v-8106bed1"]]),h=v=>(ge("data-v-42d62e25"),v=v(),ve(),v),Ve={class:"home flex flex-col items-center gap-5"},De={key:0,class:"flex flex-wrap w-[1200px] max-w-full sm:flex-col-reverse gap-5"},Me={class:"p-5 flex justify-between items-center"},Ne=h(()=>e("h4",null,"套餐",-1)),Pe=h(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),Ge={key:0,class:"h-full overflow-auto scrollbar-width-none flex-1"},He={class:"hover:bg-gray-100 dark:hover:bg-gray-900 p-5"},Ae={class:"flex items-center justify-between"},Je={class:"flex items-center justify-between"},Ke={key:0},We={key:1},Oe={class:"h-full flex items-center justify-center"},Qe={class:"copilot-box rounded-xl p-5"},Xe={class:"flex justify-between mb-2"},Ye=h(()=>e("span",{class:"font-bold text-gray-50"},"Copilot",-1)),Ze={class:"flex justify-between items-center text-gray-200"},et=h(()=>e("span",{class:""},"剩余时间",-1)),tt={class:"text-2xl"},st={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},at={class:"flex justify-between items-center mb-2"},ot=h(()=>e("h4",{class:""},"我的钱包",-1)),nt=h(()=>e("span",{class:"text-blue-500 cursor-pointer"},"更多",-1)),lt={class:"flex flex-col gap-2"},rt={class:"text-gray-600 dark:text-gray-200"},it={class:"flex flex-col justify-between gap-2"},ct={class:"flex gap-2"},dt={class:"bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl p-5"},ut=h(()=>e("span",null,"服务器时间：",-1)),_t={class:"text-blue-500"},pt=G({__name:"index",setup(v){const c=n(),m=n({width:0,height:0}),x=_e(),L=pe(),d=n({paused_time:void 0,remaining_time:0,start_time:void 0,is_paused:1}),T=N(()=>E(d.value.remaining_time,"second")),f=n();function u(){d.value.is_paused!=1&&(clearTimeout(f.value),d.value.remaining_time-=1,f.value=setTimeout(u,1e3))}function C(){oe().then(t=>{d.value=t,u()})}const y=n(!1);function R(){y.value=!0,ne().then(t=>{d.value.remaining_time=t.remaining_time,d.value.is_paused=t.is_paused,B(),u()}).finally(()=>{y.value=!1})}const s=n([]);function b(){le().then(t=>{s.value=t}).finally(()=>{X()})}const p=n(""),I=n(!1);function K(){if(!p.value){q.warn({title:"请输入兑换码"});return}I.value=!0,re(p.value).then(()=>{p.value="",b(),he.success("兑换成功")}).finally(()=>{I.value=!1})}const z=n(!1);function W(){if(!p.value){q.warn({title:"请输入兑换码"});return}z.value=!0,ie(p.value).then(()=>{p.value="",q.success({title:"兑换码有效"})}).finally(()=>{z.value=!1})}const U=n([]);function B(){ce({status:"ACTIVE",order_by:"asc"}).then(t=>{U.value=t.list.map(O)})}function O(t){t.reason_label=t.reason||"已使用：0s";const S=t.reason_label.match(/\d+/);return t.reason=S[0],t.percent=100-+t.reason/t.recharge_time*100,t}const Q=N(()=>xe(L.timeStamp));function X(){const t=getComputedStyle(c.value);m.value={width:parseFloat(t.width),height:parseFloat(t.height)}}const F=n();function Y(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"?F.value=setTimeout(C,1e3):clearTimeout(F.value)})}return H(()=>{x.account_id&&(C(),b(),B(),Y())}),(t,S)=>{const V=_("router-link"),D=_("a-divider"),Z=_("a-progress"),ee=_("a-empty"),te=_("a-switch"),se=_("a-input"),M=_("a-button");return a(),l("div",Ve,[k(x).account_id?(a(),l("div",De,[e("div",{style:fe({height:m.value.height+"px"}),class:"flex-1 sm:min-w-[300px] flex flex-col bg-white dark:bg-gray-800 dark:border-gray-900 border rounded-xl overflow-hidden"},[e("div",Me,[Ne,i(V,{to:"/copilot-package"},{default:w(()=>[Pe]),_:1})]),i(D,{class:"m-0"}),U.value.length?(a(),l("div",Ge,[(a(!0),l(g,null,j(U.value,(o,ae)=>(a(),l(g,{key:o.source},[ae!=0?(a(),A(D,{key:0,class:"m-0"})):$("",!0),e("div",He,[e("div",Ae,[e("h4",null,r(o.source),1),e("span",null,"总时长："+r(o.recharge_time_label),1)]),i(Z,{percent:o.percent,"show-info":!1,class:"mb-0",strokeColor:"#1677ff"},null,8,["percent"]),e("div",Je,[e("span",null,"剩余："+r(k(E)(o.recharge_time-+(o.reason||"0"),"second")),1),o.expire_time?(a(),l("span",Ke,"过期时间："+r(o.expire_time),1)):$("",!0),e("span",null,"已使用："+r(k(E)(+(o.reason||"0"),"second")),1)])])],64))),128))])):(a(),l("div",We,[e("div",Oe,[i(ee)])]))],4),e("div",{ref_key:"serverRef",ref:c,class:"w-[320px] sm:w-full flex flex-col gap-5 flex-shrink-0"},[e("div",Qe,[e("ul",null,[e("li",Xe,[Ye,i(te,{checked:d.value.is_paused,"checked-value":0,loading:y.value,"un-checked-value":1,"checked-children":"开",class:"copilot-green","un-checked-children":"关",onClick:R},null,8,["checked","loading"])]),e("li",Ze,[et,e("span",tt,r(T.value),1)])])]),e("div",st,[e("div",at,[ot,i(V,{to:"/purse"},{default:w(()=>[nt]),_:1})]),e("ul",lt,[(a(!0),l(g,null,j(s.value,o=>(a(),l("li",{key:o.type_label,class:"flex justify-between"},[e("span",rt,r(o.type_label),1),e("span",null,r(o.balance_label||"0"),1)]))),128)),e("li",it,[i(se,{value:p.value,"onUpdate:value":S[0]||(S[0]=o=>p.value=o),valueModifiers:{trim:!0},"allow-clear":"",placeholder:"兑换码"},null,8,["value"]),e("div",ct,[i(M,{loading:z.value,class:"flex-1",onClick:W},{default:w(()=>[P("查询 ")]),_:1},8,["loading"]),i(M,{loading:I.value,type:"primary",class:"flex-1",onClick:K},{default:w(()=>[P("充值 ")]),_:1},8,["loading"])])])])]),e("div",dt,[ut,e("span",_t,r(Q.value),1)])],512)])):$("",!0),i(Fe)])}}}),yt=J(pt,[["__scopeId","data-v-42d62e25"]]);export{yt as default};
