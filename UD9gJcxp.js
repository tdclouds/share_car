import{u as M}from"./CjPhPL0q.js";import{d as U,r as n,m as h,p as B,o as D,a as u,b as o,c as v,g as F,e as c,w as d,F as Y,I as z,t as N,J as V,q as _,T as y}from"./assets/index-DPSsBdy6.js";import{e as q,a as E}from"./BNWoJ930.js";const O={class:"w-[1200px] m-auto"},P={class:"flex items-start justify-between mb-4"},R=["innerHTML"],A=U({__name:"index",setup(j){const x=[{title:"数量",dataIndex:"num"},{title:"余额",dataIndex:"balance"},{title:"备注信息",dataIndex:"content",width:370},{title:"使用状态",dataIndex:"is_use_label",width:100},{title:"过期时间",dataIndex:"expire_time",width:160},{title:"创建时间",dataIndex:"created_at",width:160}],r=n(0),t=h({status:null,page:1,limit:10}),C=n(!1),p=n(!1),f=n([]),m=n([]),s=h({current:t.page,pageSize:t.limit,hideOnSinglePage:!0,pageSizeOptions:["10","15","20"],showTotal(a){return`共 ${a} 条`},showSizeChanger:!0,onChange(a,l){p.value=!0,t.page=a,t.limit=l,s.current=a,s.pageSize=l},total:0}),{run:b}=M(async()=>q(r.value,V(t)).then(a=>{f.value=a.list,s.total=a.total,m.value=a.filter,k(),p.value=!1}),{debounceWait:1e3,manual:!0});function k(){m.value.forEach(a=>{a.options&&(L.value[a.name]=a.options.filter(l=>l.value!==0))})}const g=n([]);async function I(){await E().then(a=>{g.value=a,r.value=a[0].type})}B(t,()=>{p.value===!1&&(t.page=1,s.current=1),b()});const L=n({});return D(async()=>{await I(),b()}),(a,l)=>{const H=u("a-select"),w=u("a-form-item"),S=u("a-form"),T=u("a-table");return o(),v("div",O,[F("div",P,[c(S,{class:"filter sm:hidden",layout:"inline"},{default:d(()=>[c(w,{label:"钱包"},{default:d(()=>[c(H,{value:r.value,"onUpdate:value":l[0]||(l[0]=e=>r.value=e),"field-names":{label:"type_label",value:"type"},options:g.value,class:"w-[180px!important] mr-2 mb-2"},null,8,["value","options"])]),_:1}),(o(!0),v(Y,null,z(m.value,e=>(o(),_(w,{key:e.name,label:e.label},{default:d(()=>[e.type==="datetime"?(o(),_(y("a-date-picker"),{key:0,value:t[e.name],"onUpdate:value":i=>t[e.name]=i,placeholder:e.label,"show-time":{format:"HH:mm"},"allow-clear":"",class:"w-[180px!important] mr-2 mb-2",valueFormat:"YYYY-MM-DD HH:mm:ss"},null,40,["value","onUpdate:value","placeholder"])):(o(),_(y("a-"+e.type),{key:1,value:t[e.name],"onUpdate:value":i=>t[e.name]=i,options:e.options,placeholder:e.label,"allow-clear":"",class:"w-[180px!important] mr-2 mb-2"},null,40,["value","onUpdate:value","options","placeholder"]))]),_:2},1032,["label"]))),128))]),_:1})]),c(T,{columns:x,dataSource:f.value,loading:C.value,pagination:s,"row-key":e=>e.id,bordered:"",class:"w-full mb-4"},{bodyCell:d(({column:e,text:i})=>[e.dataIndex==="content"?(o(),v("div",{key:0,innerHTML:i},null,8,R)):N("",!0)]),_:1},8,["dataSource","loading","pagination","row-key"])])}}});export{A as default};
